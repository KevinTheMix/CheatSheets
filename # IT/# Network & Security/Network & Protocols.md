# Network & Protocols

## Quick Tips

* [DNSstuff tools](https://www.dnsstuff.com/freetools)
* Florent = HTTP requests handled by local _Nginx_ serving Vue app through bi-directional VPN tunnel via _WireGuard_ (adding OS-level virtual network I/Os) between local (dynamic IP) machine and public remote (fixed IP) _DigitalOcean Droplet_ VM

## Glossary

* **Active Directory** (AD) = directory service for Windows domain networks using a number of standardized protocols to provide a variety of network services (eg DNS-based naming)
* **Directory Service** = maps network resources names to their respective network (eg IP) addresses (eg DNS)
* **DMZ** (De-Militarized Zone) = network area that's neither internal or public, where public-facing (email/web) servers get placed
  * Traffic with a DMZ is mostly one-way towards it, ie it has very limited connectivity towards the internal network (as much as the firewall allows basically)
  * Clients connect _directly_ (through the firewall) to different servers **within the DMZ**; that is unlike a reverse proxy that hides all the internal servers behind it
* **gRPC** = cross-platform open source RPC framework (by Google) using HTTP/2 for transport & **Protobuf** to encode data, usually connecting microservices or mobile clients to backends
  * Faster than HTTP, cannot be used with IIS
* **HTTP/2** = major revision of HTTP (developed by Google), derived from (obsolete) SPDY communication protocol, supported by nearly 100% of browsers
* **HTTPd** (HTTP daemon) = any software running as background process and playing server in a client-server model, using HTTP(S) protocol (eg Apache HTTP Server)
* **HTTPS** = TLS layer between HTTP & TCP, attested via a digitally signed server certificate, initiated via public crypto key handshake
* **Hub** (or Repeater Hub) = connects multiple Ethernet devices together acting as a single network segment, broadcasting one input of any port to all other ports (which filter in incoming data as needed)
* **JWT** (JSON Web Token) = internet standard for adding optional JSON signature/encryption to data, whose payload asserts some claims (eg "logged as admin")
  * Tokens are signed via either a shared secret or public/private key, and designed to be compact, URL-safe, usable in a web-browser SSO context
* **LDAP** (Lightweight Directory Access Protocol) = open neutral application protocol (OSI model layer 7) for accessing/maintaining distributed directory service over IP network
* **MAC Address** (Media Access Control Address) = unique ID assigned to a NIC for use as address within a network segment
* **Marshalling** = ensuring data gets from point A to point B (broader than serialization)
* **NIC** (Network Interface Card) = a device's network card (associated with a MAC)
* **Packet Switching** = grouping data into short messages in fixed format transmitted over a network (a channel is occupied during transmission of a packet only, and made available afterwards)
* **PAT** (Port Address Translation, or NAT Overload) = how a router knows where to send inbound traffic from internet back to specific querying device among all those within local network
* **Port Forwarding** (or **Port Mapping**) = makes local private device acccessible from internet (NAT rule on a home gateway/router that forwards inbound connections to specific local private IP & port)
* **Protocol Buffers** (aka _Protobuf_) = FOSS cross-platform data format (by Google) used to serialize structured data, described via a WSDL-like Interface Description Language (IDL)
* **Proxy (Server)** = application-layer intermediary in a client-server network, can be forward (at client) or reverse (at server)
* **Reverse Proxy** = accepts incoming client connections on behalf of server, hiding & representing it to outside world, for security (eg DMZ), caching, logging, monitoring user activty
* **Reverse SSH Tunneling** = have a (usually well-protected) remote computer open a connection back to local machine (with SSH started from local machine)
* **Router** = connects networks together, moving packets between them & choose best path using an IP routing table (OSI Layer 3 and above)
* **SFTP** = file transfer over ssh
* **SSH** (Secure Shell) = application-layer client-server crypto protocol for network services over unsecured network (first remote login, then either CLI or GUI via X11 Forwarding-compatible apps)
  1. establish plain TCP channel (over port 22 by convention, via three-way ACK/SYN-ACK/ACK handshake)
  2. agree on SSH protocol version & key exchange algorithms (aka KEX, eg _curve25519_/_ECDH_/_DH_)
  3. server immediately sends public key (ie half of asymmetric key pair generated by algorithm, eg _ECDSA_/_Ed25519_/_RSA_) inside its key exchange reply
  4. client compares server public key against version it has cached in a _~/.ssh/known\_hosts_ file (if public key for same host has changed, a clear warning is ussed)
  5. if host is yet unknown, TOFU model (Trust-on-First-Use) applies: a shorter/human-friendly (SHA-256, previously MD5) hashed fingerprint of server public key is calculated & presented to user to confirm they have verified its authenticity, potentially comparing it against out-of-band information
  6. in case of a valid new connection, client saves (based64-encoded) server public key along with (salted & HMAC-hashed because treated as sensitive) hostname in _~/.ssh/known\_hosts_
  7. key exchange occurs using one of KEX algorithms established earlier, and mutiple symmetric keys (eg _AES_) are derived (one per direction & for MAC)
  8. further communication now symmetrically encrypted & MAC-signed
  9. server finally authenticates client (now that server validity was assured) via either public key or password (less secure)
  * Public key is the preferred choice, as it eliminates passing password over channel (even hashed, can be brute-forced, replayed), and human factor (must be remembered, rotated)
* **SSL** (Secure Sockets Layer) = deprecated encryption protocol replaced with **TLS**
* **SSL/TLS Handshake** = client initiates an asymmetric connexion, then sends a (faster & more efficient for large amounts of data) symmetric key encrypted using server public key found in its certificate
  * Client initiates connection to the server on port 443 (the default port for HTTPS)
  * Server responds by presenting its SSL/TLS certificate file content (over TLS itself, with TCP underneath)
  * Client verifies certificate (CA signature, domain name) & initiate a (symmetric) session key exchange (Diffie-Hellmann or some variation)
  * Server must sign that key exchange using its certificate private key (only that key is able to complete that challenge)
  * An attacker possessing only the public certificate cannot forge a signature, nor decrypt handshake messages
  * The client and server have now established a secure connection, and use exchanged key to encrypt future communication
* **Single Sign-On** (SSO) = login once and use multiple systems/applications, improving user experience (eg OAuth 2.0 google/facebook, or entreprise-wide SAML-based SSO eg Azure AD or Okta)
* **SOCKS** = application-layer lightweight general-purpose proxy protocol, facilitates client-server communication through a firewall
  * SOCKS-compatible programs (such as Firefox) usually exhibit some sort of "network settings" where a SOCKS proxy can be entered through which all traffic is directed
  * Convenient with `ssh -d`, but any program that can accept a TCP connection and speak the few-byte SOCKS handshake can be a SOCKS server
* **Switch** = multiport bridging hardware connecting devices via from/to packet switching, using MAC addresses to forward data at data link layer (some able to do so at network layer, ie L3 Switches)
* **Telnet** = older (abandoned in favor of **SSH**) bi-directional client-server application protocol to access virtual terminals of remote system on LAN/Internet
* **TLS** (Transport Layer Security) = cryptographic protocol to provide communications security over a network
* **VPN** (Virtual Private Network) = network layer full network access via encrypted link (through VPN server), with optional firewall/NAT
* **VPS** (Virtual Private Server) = VM simulating a dedicated physical server environment (but actually shared with other users)
* **X.500** = series of networking standards covering electronic directory services

* _cURL_ = CLI for data transfer (FTP, HTTP, Email & co)
* _Cyberduck_ = (S)FTP, WebDAV (aka HTTP) & cloud storage (S3, Azure) client
* _FileZilla Portable_ = no-install FTP
* _FileZilla Server_ = FTP Server
* _LeechFTP_ = multi-threaded FTP client
* _lighttpd_ (light + HTTPd) = open-source web server optimized for speed-critical environments
* _OpenSSH_ = cross-platform (BSD licence) suite of SSH-based secure channel utilities (eg **sshd** a SSH server daemon) over an unsecured network in a client-server architecture
* _OpenSSL_ = implements TLS/SSL & other crypto functions (AES, RSA, SHA), with certificate handling (X.509), key generation/signing/verification
* _OpenVPN_ = FOSS client/server VPN using OpenSSL encryption library
* _PuTTY_ = FOSS (ssh/scp, telnet/rlogin, etc) terminal client for administration over networks, (originally) for Windows (1999)
* _Wget_ = HTTP(S)/FTP CLI to GET files from web servers
* _WireGuard_ = communication protocol & FOSS encrypted VPN (native on Ubuntu), adds an OS-level virtual network interface

### Internet

* **Address Block** (or IP Prefix) = contiguous range of public (delegated top-down via RIR -> LIR/ISP -> customer) or private IP addresses
* [Addressing Methods](https://en.wikipedia.org/wiki/Broadcasting_(networking)#Addressing_methods)
  * **Anycast** = one-to-one-of-many (any one out of a group of nodes, typically nearest)
  * **Broadcast** = one-to-many (all recipients/everyone, represented by an IP address with host bits all set to _1_)
  * **Multicast** = one-to-many (group of destination that have expressed interest in receiving)
  * **Unicast** = one-to-one transmission (specific node)
* **Autonomous System** (AS) = collection of IP networks (ie routing prefixes) operated under one (or more) organization (eg ISPs, GAFAMs, universities, governments, CDNs), presenting a unified routing policy to the internet
* **Autonomous System Number** (ASN)
* **Border Gateway Protocol** (BGP) = exterior gateway global routing/reachability tables
* **CIDR** (Classless Inter-Domain Routing) = method for allocating IP addresses for IP routing, introduced by IETF in 1993 to replace classful networks architecture
  * Classless IP addresses are not interpreted as part of one of the original (A/B/C/D/E) classful networks, allowing finer grain division and slowing down exhaustion of IPv4 while IPv6 deploys
* **CIDR Block**
* **CIDR Notation** = compact representation of an IP address & associated network mask (eg `198.51.100.14/24` indicating a 24 leading 1-bits network prefix `198.51.100.0` & subnet mask `255.255.255.0`)
* **Classful Network** = obsolete network addressing architecture (by IANA) dividing IP addressing space into a small number of discrete classes attributed to organizations according to their sizes
  * Class **A** = _0.0.0.0 - 127.255.255.255_ (mask 255.0.0.0)
    * Within class A, all _127.0.0.0/8_ adresses are designated for loopback and cannot be assigned to a network (16M unusable addresses)
  * Class **B** = _128.0.0.0 - 191.255.255.255_ (mask 255.255.0.0)
  * Class **C** = _192.0.0.0 - 223.255.255.255_ (mask 255.255.255.0)
  * Class **D** (multi cast) & Class E (reserved) = _224.0.0.0 - 255.255.255.255_
  * Some ranges within those classes are permanentely carved out of public usage because they are reserved for **private networks**
  * Networks established with this scheme were either too small or way too large for actual organization needs, leading to exhaustion of IPv4 addresses
* **DHCP** (Dynamic Host Configuration Protocol) = IP network management protocol for automatically assigning IP addresses & other communication parameters to devices, using a client-server architecture
* **DNS Root Zone** = top-level DNS zone in hierarchical namespace of internet DNS
* **Host Identifier** (or Rest Field) = host portion of an IP address following network prefix
* **ICMP** (Internet Control Message Protocol) = Network-layer supporting IP suite protocol, used by routers (and some by users eg `ping`, `traceroute`) to send error messages and OK/NOK statuses
* **IANA** (Internet Assigned Numbers Authority) = standards organization overseeing global IP addresses & ASN allocation, root zone management in DNS, media types & other protocols
* **ICANN** (Internet Corporation for Assigned Names and Numbers) = global multistakeholder group & nonprofit US organization responsible for coordinating maintenance of internet name & numerical spaces DBs
* **IETF** (Internet Engineering Task Force) = standards (originally US government-backed, now under Internet Society) organization for internet, responsible for technical standards making up the Internet Protocol Suite
* **Internet Service Provider** (ISP) = provides internet-related services (access, transit, DNS, hosting, colocation)
* **Internet Society** = American non-profit advocacy organization
* **IPAM** (IP Address Management) = methodology used by organizations to plan & manage their uses of IP addresses (ie how to carve their allocated address block into subnets)
* **IPSec** (Internet Protocol Security) = network-layer protocol suite that secures IP packets by authenticating/encrypting each of them in a session
  * Uses **IKE** (Internet Key Exchange) to negotiate keys & settings
* **Local Internet Registry** (LIR) = organization (usually an ISP/entreprise/academic institution) that was allocated an IP Address Block by a RIR to assign to its own customers
* **Loopback** = routes back to source without intentional modification, primarily to test communication infrastructure
* **MTU** (Maximum Transmission Unit) = largest protocol data unit (PDU) that can be communicated in a single network layer transaction
* **Network Prefix** (or Network Number or Routing Prefix) = network portion of an IP address
* **Private Network** = subnet with addresses in private IP ranges, for LANs in residential/office/enterprise environments
  * IETF has directed IANA to reserve following IPv4 address ranges for private networks(RFC 1918):
  * 24-bit block = _10.0.0.0 - 10.255.255.255_ (16777216 addresses)
  * 20-bit block = _172.16.0.0 - 172.31.255.255_ (1048576 addresses)
  * 16-bit block = _192.168.0.0 - 192.168.255.255_ (65536 addresses)
* **Quad-Dotted Notation** = 4 number specific case of Dot-decimal notation (decimal numbers separated by _._ dots)
* **Regional Internet Registry** (RIR) = organization managing allocation & registration of (public) internet number resources within a world region
* **Routing Prefix** (aka **Network Number**) = network part of an IP address
* **Subnet** = mathematical/logical prefix-length-based subdivision of an IP network, defining two parts to IP addresses (a network prefix & host identifier)
  * Number of attributable host addresses in a (sub)network = 2^number of bits in host portion (minus two: (sub)network & broadcasting addresses, ie all host bits to _0_ & _1_ respectively)
  * Subnetting is not just for private networks, RIR/LIR/ISPs all need to subnet their allocated address block
* **Subnet Mask** (or **Net Mask**) = an bitwise AND bitmask revealing network portion of an IP in quad-dotted notation (ie keep network & nullify host eg `255.255.255.0`)
* **TCP/IP** (Internet Protocol Suite) = framework for organizing communication protocols used in internet & similar computer networks
* **VLSM** (Variable-Length Subnet Mask(ing)) = designing internal networks with variable-size subnets using CIDR rules (dichotomically dividing allocating largest networks first)

#### OSI Model

Abstract conceptual division of responsibilities.
Multiple layers capabilities can be taken care by a single layer (eg Session & Presentation Layer can be made at Application-level).
Layers sometimes shortened to _Ln_ (eg _L2_ for Transport Layer 2)

* **L2 Switch** = routing within a VLAN (not between VLANs)
* **L3 Switch** = L2 switch with build-in network layer routing capabilities (eg for campus or data center)
* Layer 1 (**Physical**) = raw bits over cable/radio/fiber
* Layer 2 (**Data Link**) = Ethernet/(W)LAN frames, MAC address, error checking, basic sending & receiving
* Layer 3 (**Network**) = packets routing between VLANs, breaking down long data streams into segments shorter than network MTU
* Layer 4 (**Transport**) = variable-length TCP segment sequences end-to-end with QoS functions
* Layer 5 (**Session**) = creates setup, controls connection, ends teardown (disconnect) between computers
* Layer 6 (**Presentation**) = data formatting/translation into application layer specified format (ie encoding/decoding)
* Layer 7 (**Application**) = user software (eg a browser)
* **MTU** (Maximum Transmission Unit) = size of largest PDU that can be communicated in a single network layer transaction
* **PDU** (Protocol Data Unit) = single unit of information transmitted among peers in a network, composed of layer-specific control information & encapsulated SDU from higher level
* **SDU** (Service Data Unit) = unit of data passed down from a higher to a lower layer, which treats it as its payload (to encapsulate with its own control data, in an onion fashion)

### E-mail

* **ADSP** (Author Domain Signing Practices) = optional extension to DKIM
* **ARC** (Authenticated Received Chain) = new (2019) auth protocol that adds a cryptographically verifiable chain of custody to every hop a (transfered) e-mail takes (à la blockchain)
* **BIMI** (Brand Indicators for Message Identification) = add brand logo (validated by a third-party) to outgoing e-mails
  * **CMC** (Common Mark Certificate)
  * **VMC** (Verified Mark Certificate)
* **DKIM** (DomainKeys Identified Mail) = e-mail authentication scheme, lets sender automatically sign outgoing e-mails, checkable via a public key
* **DKIM Record** = specialized DNS TXT records that stores public key used in DKIM
* **DMARC** (Domain-based Message Authentication, Reporting & Conformance) = policy protocol between servers to align SPF/DKIM failing e-mails (aka spams) management, and alert sender
* **DMARC Record** = stores DMARC policies
* **DNS** (Domain Name System) = phonebook of the Internet, hierarchical maps of readable URLs to IP addresses
* **DNS Record** = information about domains provided by authoritative DNS Servers, of different types:
  * **A / AAAA** = IP addresses for hosts (IPv4/IPv6)
  * **CNAME** (Canonical Name) = maps one domain name to another (ie alias)
  * **MX** = which hosts (ie servers) accept incoming e-mail for a domain
  * **TXT** = free form text, widely used for SPF, DKIM keys, verification tokens
* **ESP** (Email Service Provider) = cloud platform providing infrastructure to send/receive/track large volumes of e-mails (eg marketing newletter, receipts, password resets, etc)
* **IMAP** (Internet Message Access Protocol) = Internet standard protocol used by (multiple) e-mail clients to retrieve e-mail from a mail server over a TCP/IP connection
* **MIME** (Multipurpose Internet Mail Extensions) = e-mail format extension to support multi-part body, non-ASCII character sets, and multimedia attachments
* **MTA** (Mail/Message Transfer Agent) = queries MX records about an e-mail's recipient(s), and establishes an SMTP connection with those servers (by MX record priority)
* **MX** (Mail eXchanger) = e-mails routing information queryed by MTAs to accomplish SMTP
* **MX Record** = DNS Record indicating which servers should receive mail for a domain, ie a routing table using a priority list to direct e-mails to one or more mail servers
* **POP(3)** (Post Office Protocol) = application-layer Internet standard protocol used by e-mail clients to retrieve e-mail from a mail server
* **S/MIME** = standard for public-key encryption/signing of MIME data
* **SMTP** (Simple Mail Transfer Protocol) = Internet standard communication protocol for electronic mail transmission used by servers and MTAs
* **SPF** (Sender Policy Framework) = protocol to let e-mail sending domains publish a record list of authorized source address to send and avoid getting flagged as spam by receivers
* **SPF Record** = DNS TXT records including a list of IP addresses & domains authorized to send emails from a domain
* **TLD** (Top-Level Domain) = root (eg _.com_)

* _FEI_ (Forensic Email Intelligence, by _Metaspike_) = commercial desktop tool to dissect raw e-mail evidence for investigations
* _Mailgun_ = one of the best known ESPs, using REST/SMTP API (rather than a drag&drop GUI)
* _SendGrid_ (by _Twilio_) = ESP

### Wi-Fi

* **AAA Key** (Authentication, Authorization & Accounting) aka **MSK** (Master Session Key) = additional key so that each client has a separate session
* **AP** (Access Point) = router
* **EAPOL** (Extensible Authentication Protocol) = authentication framework frequently used in (inter)network connections, via variety of methods (TLS, PSK)
* **EAPOL-Key**
* **GMK** (Group Master Key)
* **GTK** (Group Temporal Key)
* **IEEE 802** = family of standards for LAN, PAN & MAN
* **IEEE 802.11** = WLAN (Wi-Fi)
* **Monitor Mode** (& Packet Injection) = features of some WiFi routers (such as Taiwanese Alfa Network AWUS1900)
* **PMKID** = unique key used by AP to keep track of PMKs used by clients (for cacheing purposes, derived from AP MAC, Client MAC, PMK, PMK Name)
* **PMK** (Pairwise Master Key) = 256-bit key used to encrypt WiFi data between a client & router, it is composed of a Pre-shared Key (and additional AAA Key for _WPA-Enterprise_)
* **PSK** (Pre-shared Key) = PBKDF2-derived key from a personal WiFi passphrase (only key needed for _WPA-Personal_)
* **PTK** (Pairwise Transient Key)
* **STA** (Station) = a WiFi client
* **SNonce** (STA Nonce)
* **TKIP**
* **WEP** (Wireless Equivalent Pricavy) = early encryption protocol to secure WLAN (started as _802.11_ in 1985, used a single key for everything)
* **WiFi** = implementation of WLAN
* **WLAN** (Wide Local Area Network) = wireless LAN (eg WiFi), as defined by various protocols in _IEEE 802.11_ (a, b, j, y, ac, …, specifying frequency & bandwidth)
* **WPA** (Wi-Fi Protected Access) = Wi-Fi Alliance security protocols (implements a subset of a _802.11i_ draft ie early WPA2 in 1999), introduces 4-way handshake and a hierarchy of keys
* **WPA2** (Wi-Fi Protected Access II) = replaces WPA (defined in 2004 in _IEEE 802.11i-2004_ as an amendment to original _IEEE 802.11_), introduces **AES**
* **WPA3** (Wi-Fi Protected Access III) = replaces WPA2 (mandates stronger cryptographic algorithms, announced in 2018)
* **WPA-Personal** (aka WPA-PSK) = PSK-encrypted WiFi
* **WPA-Enterprise** = requires additional (so called _802.1X_-defined _RADIUS_) authentication server
* **Yagi(–Uda) antenna** = directional antenna

* _ESP32_ (_Espressif Systems_) = low-cost low-power Wi-Fi & Bluetooth system-on-a-chip (SoC) MCU (Microcontroller Unit, ie an electronic board/chip)
